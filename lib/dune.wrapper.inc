; This file is generated by ortac dune wrapper
; It contains the rules for generating a wrapper for demo.mli

(rule
 (alias runtest)
 (mode promote)
 (targets demo_wrapped.mli)
 (deps demo.mli)
 (action
  (copy
   %{deps}
   %{targets})))

(rule
 (alias runtest)
 (mode promote)
 (targets demo_wrapped.ml)
 (deps demo.mli)
 (action
  (setenv
   ORTAC_ONLY_PLUGIN
   wrapper
   (with-stdout-to
    %{targets}
    (ignore-stderr
     (run
      ortac
      wrapper
      %{deps}))))))

(library
 (name demo_wrapped)
 (modules demo_wrapped)
 (flags -w -27)
 (libraries ortac-runtime demo))
